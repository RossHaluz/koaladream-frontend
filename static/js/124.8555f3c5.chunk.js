"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[124],{9124:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(1413),r=n(3433),i=n(9439),s=n(5705),c=n(2791),l=n(9126),o=n(7425),p=n(9434),x=n(7689),d=n(7287),u=n(2530),m=n(3554),f=n(7589),h=n(5395),g=n(98),v=n(5329),j=n(184),N=function(e){var t=e.item,n=t.title,N=t.desc,b=t.images,y=t.price,k=t.oldPrice,A=t.care,Z=t.characteristics,C=t.status,S=t.categoryName,F=t.article,I=t.options,_=t.filters,w=t.hitSales,O=t._id;console.log(_);var J=(0,p.I0)(),P=(0,p.v9)(u.yO),M=(0,p.v9)(v.x),U=(0,p.v9)(f.m),V=(0,c.useState)(JSON.parse(I)),D=(0,i.Z)(V,2),E=D[0],R=D[1],T=(0,c.useState)(JSON.parse(I).flatMap((function(e){return e.options}))),z=(0,i.Z)(T,2),L=z[0],q=z[1],B=(0,c.useState)(JSON.parse(_)),G=(0,i.Z)(B,2),H=G[0],K=G[1],W=(0,c.useState)(JSON.parse(_).flatMap((function(e){return e.options}))),$=(0,i.Z)(W,2),Q=$[0],X=$[1],Y=(0,c.useState)(b.map((function(e){return e}))),ee=(0,i.Z)(Y,1)[0],te=(0,c.useState)(null),ne=(0,i.Z)(te,2),ae=ne[0],re=ne[1],ie=(0,c.useRef)(),se=(0,x.s0)();console.log(Q);var ce=function(e){var t=e.target,n=t.value,a=t.checked,i=t.attributes.opt_val.value;R(a?function(e){return[].concat((0,r.Z)(e),[{name:n,optionId:i,options:E}])}:E.filter((function(e){return e.name!==n})))},le=function(e){var t=e.target,n=t.value,i=t.checked,s=t.attributes.opt_val.value;i?(q((function(e){return[].concat((0,r.Z)(e),[{name:n,price:null,optionId:s}])})),R((function(e){return e.map((function(e){return e.optionId===s?(0,a.Z)((0,a.Z)({},e),{},{options:[].concat((0,r.Z)(e.options),[{name:n,price:null,optionId:s}])}):e}))}))):(q((function(e){return e.filter((function(e){return e.name!==n}))})),R((function(e){return e.map((function(e){return e.optionId===s?(0,a.Z)((0,a.Z)({},e),{},{options:e.options.filter((function(e){return e.name!==n}))}):e}))})))},oe=function(e){var t=e.target,n=t.value,a=t.checked,i=t.attributes.filter_val.value;K(a?function(e){return[].concat((0,r.Z)(e),[{name:n,filterId:i,options:H}])}:H.filter((function(e){return e.name!==n})))},pe=function(e){var t=e.target,n=t.value,i=t.checked,s=t.attributes.filter_val.value;i?(X((function(e){return[].concat((0,r.Z)(e),[{name:n,filterId:s}])})),K((function(e){return e.map((function(e){return e.filterId===s?(0,a.Z)((0,a.Z)({},e),{},{options:[].concat((0,r.Z)(e.options),[{name:n,filterId:s}])}):e}))}))):(X((function(e){return e.filter((function(e){return e.name!==n}))})),K((function(e){return e.map((function(e){return e.filterId===s?(0,a.Z)((0,a.Z)({},e),{},{options:e.options.filter((function(e){return e.name!==n}))}):e}))})))};(0,c.useEffect)((function(){J((0,d.CP)()),J((0,m.Zj)()),J((0,g.FW)())}),[J]);var xe={title:n,desc:N,price:y,oldPrice:k,status:C,article:F,categoryName:S,hitSales:w,characteristics:Z.length>0?JSON.parse(Z):[],care:A||""};return(0,j.jsxs)("div",{className:"p-[15px] flex  gap-[15px]",children:[(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("h1",{className:"text-[24px] font-bold",children:"Eddit item"}),(0,j.jsx)(s.J9,{initialValues:xe,onSubmit:function(e,t){var n=t.resetForm,a=e.title,r=e.desc,i=e.price,s=e.oldPrice,c=e.status,l=e.article,o=e.characteristics,p=e.categoryName,x=e.hitSales,d=new FormData;if(d.append("title",a),d.append("desc",r),d.append("hitSales",x),d.append("price",i),d.append("oldPrice",s),d.append("status",c),d.append("article",l),d.append("categoryName",p),E&&d.append("options",JSON.stringify(E)),o&&d.append("characteristics",JSON.stringify(o)),H&&d.append("filters",JSON.stringify(H)),d.append("care",A),ae)for(var u=0;u<ae.length;u++)d.append("updateImage",ae[u]);else ee.map((function(e){return d.append("`updateImage`",e)}));J((0,h.$G)({data:d,itemId:O})),se("/admin/items"),n()},children:function(e){var t=e.values;return(0,j.jsxs)(s.l0,{className:"w-full flex flex-col gap-[15px]",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 items-center gap-[15px]",children:[(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("h3",{className:"text-[18px] font-medium",children:["Title item ",(0,j.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,j.jsx)(s.gN,{name:"title",type:"text",placeholder:"Title item",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("h3",{className:"text-[18px] font-medium",children:["Article item ",(0,j.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,j.jsx)(s.gN,{name:"article",type:"text",placeholder:"Article item",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 items-center gap-[15px]",children:[(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("h3",{className:"text-[18px] font-medium",children:["Price item ",(0,j.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,j.jsx)(s.gN,{name:"price",type:"text",placeholder:"Price item",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsx)("h3",{className:"text-[18px] font-medium",children:"Old price item"}),(0,j.jsx)(s.gN,{name:"oldPrice",type:"text",placeholder:"Old price  item",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 items-center gap-[15px]",children:[(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("h3",{className:"text-[18px] font-medium",children:["Choose category",(0,j.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,j.jsxs)(s.gN,{name:"categoryName",as:"select",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[18px] font-medium text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none",children:[(0,j.jsx)("option",{value:"",children:"--Choose a categoty--"}),null===P||void 0===P?void 0:P.map((function(e){var t=e.title,n=e._id;return(0,j.jsx)("option",{value:t,children:t},n)}))]})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsx)("h3",{className:"text-[18px] font-medium",children:"Choose status"}),(0,j.jsxs)(s.gN,{name:"status",as:"select",className:"bg-transparent border border-solid border-[#7FAA84] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none",children:[(0,j.jsx)("option",{value:"",children:"--Choose a status--"}),(0,j.jsx)("option",{value:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456",children:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"}),(0,j.jsx)("option",{value:"\u0417\u0430\u043a\u0456\u043d\u0447\u0443\u0454\u0442\u044c\u0441\u044f",children:"\u0417\u0430\u043a\u0456\u043d\u0447\u0443\u0454\u0442\u044c\u0441\u044f"}),(0,j.jsx)("option",{value:"\u041d\u0435\u043c\u0430\u0454 \u0432 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456",children:"\u041d\u0435\u043c\u0430\u0454 \u0432 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"})]})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-[24px] font-medium",children:"Choose options"}),(0,j.jsx)("ul",{className:"flex flex-col gap-[15px]",children:null===M||void 0===M?void 0:M.map((function(e,t){var n=e.optionValues,a=e.name,r=e._id;return(0,j.jsxs)("li",{children:[(0,j.jsxs)("label",{className:"flex items-center gap-[10px]",children:[(0,j.jsx)(s.gN,{name:"".concat(M,"[").concat(t,"].").concat(a),opt_val:r,checked:null===E||void 0===E?void 0:E.find((function(e){return e.name===a})),type:"checkbox",value:a,onChange:ce}),(0,j.jsx)("h3",{className:"text-[18px] font-semibold",children:a})]}),E.find((function(e){return e.name===a}))&&(null===n||void 0===n?void 0:n.map((function(e,t){var n=e.name;e.price;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("label",{className:"flex items-center gap-[10px]",children:[(0,j.jsx)(s.gN,{name:"".concat(M,"[").concat(t,"].").concat(n),opt_val:r,value:n,checked:L.find((function(e){return e.name===n})),onChange:le,type:"checkbox"}),(0,j.jsx)("h3",{className:"text-[16px] font-medium",children:n})]},t),(null===L||void 0===L?void 0:L.find((function(e){return e.name===n})))&&(0,j.jsx)("input",{type:"text",value:E.map((function(e){return e.options.find((function(e){return e.name===n}))})).flatMap((function(e){return null===e||void 0===e?void 0:e.price}))[0]||"",placeholder:"Type price for option",onChange:function(e){var t=null===L||void 0===L?void 0:L.find((function(e){return e.name===n}));!function(e,t){var n=e.target.value,a=E.flatMap((function(e){return e.options})),r=a.find((function(e){return e.name===t.name}));r.price=Number(n)}(e,t)}})]})})))]},r)}))})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-[24px] font-medium",children:"Choose filters"}),(0,j.jsx)("ul",{children:null===U||void 0===U?void 0:U.map((function(e,t){var n=e.name,a=e.filterValue,r=e._id;return(0,j.jsxs)("li",{children:[(0,j.jsxs)("label",{className:"flex items-center gap-[10px]",children:[(0,j.jsx)(s.gN,{name:"".concat(U,"[").concat(t,"].").concat(n),filter_val:r,value:n,type:"checkbox",checked:H.find((function(e){return e.name===n})),onChange:oe}),(0,j.jsx)("h3",{className:"text-[18px] font-semibold",children:n})]}),H.find((function(e){return e.name===n}))&&(null===a||void 0===a?void 0:a.map((function(e,t){var n=e.name;return(0,j.jsxs)("label",{className:"flex items-center gap-[10px]",children:[(0,j.jsx)(s.gN,{name:"".concat(U,"[").concat(t,"].").concat(n),filter_val:r,checked:Q.find((function(e){return e.name===n})),value:n,type:"checkbox",onChange:pe}),(0,j.jsx)("h3",{className:"text-[16px] font-medium",children:n})]})})))]},r)}))})]}),(0,j.jsx)("div",{children:(0,j.jsx)(s.F2,{name:"characteristics",render:function(e){var n;return(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("div",{className:"flex items-center gap-[15px]",children:[(0,j.jsx)("h2",{className:"text-[24px] font-bold",children:"Add characteristics"}),(0,j.jsx)("button",{type:"button",onClick:function(){return e.push({name:"",option:""})},className:"p-[15px] bg-[#343a40] rounded-[5px] w-[34px] h-[34px] relative",children:(0,j.jsx)(l.B8K,{className:"text-[#fff] text-[24px] absolute top-[5px] left-[5px]"})})]}),(0,j.jsx)("div",{className:"flex flex-col gap-[15px]",children:t.characteristics&&t.characteristics.length>0&&(null===(n=t.characteristics)||void 0===n?void 0:n.map((function(t,n){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"flex items-center gap-[10px]",children:[(0,j.jsxs)("label",{className:"flex flex-col gap-[10px]",children:["Name",(0,j.jsx)(s.gN,{name:"characteristics[".concat(n,"].name")})]}),(0,j.jsxs)("label",{className:"flex flex-col gap-[10px]",children:["Option",(0,j.jsx)(s.gN,{name:"characteristics[".concat(n,"].option")})]}),(0,j.jsx)("button",{type:"button",onClick:function(){return e.remove(n)},children:(0,j.jsx)(o.qy0,{className:"w-[24px] h-[24px] text-red-500"})})]})})})))})]})}})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-[18px] font-medium",children:"Care for item"}),(0,j.jsx)(s.gN,{name:"care",as:"textarea",placeholder:"Care for item",className:"bg-transparent resize-none border border-solid border-[#7FAA84] w-full h-[350px] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px] items-start",children:[(0,j.jsx)("h3",{className:"text-[24px] font-medium",children:"Hot sales"}),(0,j.jsx)(s.gN,{name:"hitSales",type:"checkbox"})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsx)("h3",{className:"text-[18px] font-medium",children:"Description item"}),(0,j.jsx)(s.gN,{name:"desc",as:"textarea",placeholder:"Description item",className:"bg-transparent resize-none border border-solid border-[#7FAA84] w-full h-[350px] rounded-[5px] px-[15px] py-[15px] text-[16px] text-[#484848]/[.50] tracking-[0.32px] leading-[24px] outline-none"})]}),(0,j.jsx)("button",{type:"submit",className:"py-[15px] px-[25px] bg-[#7FAA84] rounded-[5px] text-[#fff] text-[16px] font-medium w-[220px]",children:"Update item"})]})}})]}),(0,j.jsxs)("div",{className:"flex flex-col gap-[15px]",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{type:"file",className:"hidden",multiple:!0,ref:ie,onChange:function(e){var t=e.target.files,n=Array.from(t);re(n)}}),(0,j.jsx)("button",{type:"button",onClick:function(){return ie.current.click()},className:"text-gray-300 bg-gray-600 text-sm flex justify-center items-center border-2 border-dotted cursor-pointer py-4 w-[350px]",children:"Add file"})]}),ae?(0,j.jsx)("ul",{className:"flex flex-col gap-[10px]",children:ae.map((function(e,t){return(0,j.jsx)("li",{children:(0,j.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-[350px] h-[150px]"})},t)}))}):(0,j.jsx)(j.Fragment,{children:null===ee||void 0===ee?void 0:ee.map((function(e){return(0,j.jsx)("div",{className:"w-[350px]",children:(0,j.jsx)("img",{src:e,alt:"Item img"})},e)}))})]})]})},b=n(1429),y=function(){var e=(0,p.I0)(),t=(0,p.v9)(b.sp),n=(0,x.UO)().itemId;return console.log(t),(0,c.useEffect)((function(){e((0,h.rV)(n))}),[e,n]),(0,j.jsx)(j.Fragment,{children:t&&(0,j.jsx)(N,{item:t})})}},7589:function(e,t,n){n.d(t,{A:function(){return r},m:function(){return a}});var a=function(e){return e.filterAdmin.filters},r=function(e){return e.filterAdmin.filter}},5329:function(e,t,n){n.d(t,{N:function(){return r},x:function(){return a}});var a=function(e){return e.option.options},r=function(e){return e.option.option}}}]);
//# sourceMappingURL=124.8555f3c5.chunk.js.map